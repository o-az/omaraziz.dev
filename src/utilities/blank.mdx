import rehypePrettyCode from 'rehype-pretty-code'

const rehypePrettyCodeOptions = {
  theme: await import('../../../public/assets/mdx-theme/moonlight-ii.json'),
  onVisitLine(node: { children: { type: string; value: string }[] }) {
    if (node.children.length === 0) node.children = [{ type: 'text', value: ' ' }]
  },
  onVisitHighlightedLine(node: { properties: { className: string[] } }) {
    node.properties.className.push('line--highlighted')
  },
  onVisitHighlightedWord(node: { properties: { className: string[] } }) {
    node.properties.className = ['word']
  },
}

import { marked } from 'marked'
marked.setOptions({
  gfm: true,
  // highlight: (code, lang, callback) => {},
})
const md = marked.parse(`<div><h1>Hello World</h1><p>This markup was generated by a Cloudflare Worker.</p></div>`)